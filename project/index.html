<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Player Search</title>

  <style>
    #player-card {
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 10px;
      width: 320px;
      font-family: Arial;
    }
    #player-card img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
    }
    #details {
      display: none; 
      margin-top: 15px;
      background: #f8f8f8;
      padding: 10px;
      border-radius: 8px;
    }
    button {
      margin-top: 10px;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h2>Search Player</h2>

  <input type="text" id="search" placeholder="Type player name..."/>
  <button onclick="searchPlayer()">Search</button>

  <div id="player-card"></div>

  <script>
    let allPlayers = [];

    async function loadPlayers() {
      let res = await fetch("playersStats.json");
      let data = await res.json();
      allPlayers = data.response;
    }

    function searchPlayer() {
      let name = document.getElementById("search").value.trim().toLowerCase();
      let card = document.getElementById("player-card");
      card.innerHTML = "";

      if (name === "") {
        card.innerHTML = "<p>Please enter a name.</p>";
        return;
      }

      let playerObj = allPlayers.find(p =>
        p.player.name.toLowerCase().includes(name)
      );

      if (!playerObj) {
        card.innerHTML = "<p>No player found.</p>";
        return;
      }

      const p = playerObj.player;
      const stats = playerObj.statistics[0];

      // BASIC CARD + SHOW MORE BUTTON
      card.innerHTML = `
        <img src="${p.photo}">
        <h3>${p.name}</h3>
        <p><b>Team:</b> ${stats.team.name}</p>
        <p><b>League:</b> ${stats.league.name}</p>
        <p><b>Goals:</b> ${stats.goals.total} | <b>Assists:</b> ${stats.goals.assists}</p>
        <button onclick="toggleDetails()">Show More</button>

        <div id="details">
          <h4>Full Stats</h4>
          <p><b>Position:</b> ${stats.games.position}</p>
          <p><b>Appearances:</b> ${stats.games.appearences}</p>
          <p><b>Minutes:</b> ${stats.games.minutes}</p>
          <p><b>Rating:</b> ${stats.games.rating}</p>
          <hr>
          <p><b>Shots:</b> ${stats.shots.total} (On Target: ${stats.shots.on})</p>
          <p><b>Passes:</b> ${stats.passes.total} (Key: ${stats.passes.key})</p>
          <p><b>Accuracy:</b> ${stats.passes.accuracy}%</p>
          <hr>
          <p><b>Dribbles:</b> ${stats.dribbles.attempts} (Success: ${stats.dribbles.success})</p>
          <p><b>Tackles:</b> ${stats.tackles.total}</p>
          <p><b>Duels Won:</b> ${stats.duels.won}</p>
          <hr>
          <p><b>Yellow Cards:</b> ${stats.cards.yellow}</p>
          <p><b>Red Cards:</b> ${stats.cards.red}</p>
          <hr>
          <p><b>Penalties Scored:</b> ${stats.penalty.scored}</p>
          <p><b>Penalties Missed:</b> ${stats.penalty.missed}</p>
        </div>
      `;
    }

    function toggleDetails() {
      const details = document.getElementById("details");
      const button = details.previousElementSibling;

      if (details.style.display === "none") {
        details.style.display = "block";
        button.innerText = "Show Less";
      } else {
        details.style.display = "none";
        button.innerText = "Show More";
      }
    }

    loadPlayers();
  </script>

</body>
</html>
